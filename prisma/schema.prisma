datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model PlcLog {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now())
  pressure    Float[]
  temperature Float[]
  action      String   @default("OK")   // üëà ‡πÄ‡∏û‡∏¥‡πà‡∏° default
  reason      String?
}


model PlcSetting {
  id        String   @id @default(uuid())
  sensor    String   @unique
  maxValue  Float
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}


model PlcStatus {
  id        String   @id @default(uuid())
  isRunning Boolean  @default(false)  // ‚úÖ ‡πÅ‡∏ó‡∏ô M1000
  alarm     Boolean  @default(false)  // alarm ‡∏°‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤
  reason    String?                   // ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• alarm
  updatedAt DateTime @updatedAt
}

model PlcCommand {
  id        String   @id
  command   String
  source    String
  status    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model NgrokTunnel {
  id        String   @id @default("ngrok-url") // ‡πÉ‡∏ä‡πâ fixed id 1 record
  url       String
  updatedAt DateTime @updatedAt
}

model User {
  id       String   @id @default(uuid())
  name     String?
  email    String   @unique
  password String
  role     String
}



enum Shift {
  MORNING
  NIGHT
}

model Vehicle {
  id        String   @id @default(uuid())
  name      String
  plateNo   String?
  fuelLogs  FuelLog[]
}

model FuelLog {
  id        String   @id @default(uuid())
  date      DateTime @default(now())
  shift     Shift?
  shiftDate DateTime?   // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏ö‡∏ö optional
  fuelIn    Float
  fuelUsed  Float
  note      String?
  vehicleId String
  vehicle   Vehicle  @relation(fields: [vehicleId], references: [id])
}


